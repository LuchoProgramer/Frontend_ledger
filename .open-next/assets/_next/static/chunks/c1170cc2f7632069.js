(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,r,s)=>{r.exports=e.r(76562)},67585,(e,r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let t=e.r(32061);function a({reason:e,children:r}){if("undefined"==typeof window)throw Object.defineProperty(new t.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r}},9885,(e,r,s)=>{"use strict";function t(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"encodeURIPath",{enumerable:!0,get:function(){return t}})},52157,(e,r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return i}});let t=e.r(18050),a=e.r(74080),l=e.r(63599),n=e.r(9885);function i({moduleIds:e}){if("undefined"!=typeof window)return null;let r=l.workAsyncStorage.getStore();if(void 0===r)return null;let s=[];if(r.reactLoadableManifest&&e){let t=r.reactLoadableManifest;for(let r of e){if(!t[r])continue;let e=t[r].files;s.push(...e)}}return 0===s.length?null:(0,t.jsx)(t.Fragment,{children:s.map(e=>{let s=`${r.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,t.jsx)("link",{precedence:"dynamic",href:s,rel:"stylesheet",as:"style",nonce:r.nonce},e):((0,a.preload)(s,{as:"script",fetchPriority:"low",nonce:r.nonce}),null)})})}},69093,(e,r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return d}});let t=e.r(18050),a=e.r(71645),l=e.r(67585),n=e.r(52157);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let r={...o,...e},s=(0,a.lazy)(()=>r.loader().then(i)),d=r.loading;function c(e){let i=d?(0,t.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=!r.ssr||!!r.loading,c=o?a.Suspense:a.Fragment,u=r.ssr?(0,t.jsxs)(t.Fragment,{children:["undefined"==typeof window?(0,t.jsx)(n.PreloadChunks,{moduleIds:r.modules}):null,(0,t.jsx)(s,{...e})]}):(0,t.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,t.jsx)(s,{...e})});return(0,t.jsx)(c,{...o?{fallback:i}:{},children:u})}return c.displayName="LoadableComponent",c}},70703,(e,r,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return a}});let t=e.r(55682)._(e.r(69093));function a(e,r){let s={};"function"==typeof e&&(s.loader=e);let a={...s,...r};return(0,t.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),r.exports=s.default)},66606,e=>{"use strict";var r=e.i(18050),s=e.i(71645),t=e.i(18566),a=e.i(57951),l=e.i(9165);let n=(0,e.i(70703).default)(()=>e.A(6294),{loadableGenerated:{modules:[79609]},ssr:!1,loading:()=>(0,r.jsx)("p",{className:"text-gray-500",children:"Cargando mapa..."})});function i(){let e=(0,t.useRouter)(),{user:i,isAdmin:o}=(0,a.useAuth)(),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(""),[x,h]=(0,s.useState)(""),[p,g]=(0,s.useState)(!0),[b,f]=(0,s.useState)(!1),[j,y]=(0,s.useState)({nombre:"",direccion:"",telefono:"",codigo_establecimiento:"001",punto_emision:"001",es_matriz:!0,latitud:void 0,longitud:void 0,mostrar_en_mapa:!1});(0,s.useEffect)(()=>{o?(async()=>{try{let r=(0,l.getApiClient)(),s=await r.getSucursalesList({page_size:1});s.success&&(s.count??0)>0?e.push("/"):g(!1)}catch(e){console.error("Error verificando sucursales:",e),g(!1)}})():e.push("/")},[o,e]);let v=async r=>{r.preventDefault(),c(!0),m(""),h("");try{console.log("[Onboarding] FormData antes de enviar:",JSON.stringify(j,null,2));let r=(0,l.getApiClient)(),s=await r.crearSucursal(j);s.success?(h("隆Sucursal creada exitosamente! Redirigiendo al dashboard..."),setTimeout(()=>{e.push("/")},2e3)):m(s.error||"Error al crear la sucursal")}catch(e){m(e.message||"Error al crear la sucursal")}finally{c(!1)}};return p?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Verificando configuraci贸n..."})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-6",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"隆Bienvenido a LedgerXpertz!"}),(0,r.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Para comenzar a usar el sistema, necesitamos configurar tu primera sucursal. Esta ser谩 la sucursal matriz de tu empresa."})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,r.jsx)("span",{className:"text-xl",children:""})}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"Sucursal Matriz"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"La sucursal principal de tu empresa. Puedes agregar m谩s sucursales despu茅s."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:(0,r.jsx)("span",{className:"text-xl",children:""})}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"Asignar Usuarios"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Despu茅s podr谩s crear usuarios y asignarlos a las sucursales correspondientes."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:(0,r.jsx)("span",{className:"text-xl",children:""})}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"Gesti贸n de Inventario"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Cada sucursal tendr谩 su propio inventario y punto de venta."})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-200",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Configurar Sucursal Matriz"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Complete la informaci贸n de su sucursal principal"})]}),u&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-red-600 mt-0.5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-red-800 mb-1",children:"Error"}),(0,r.jsx)("p",{className:"text-red-700",children:u})]})]}),x&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-start",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600 mt-0.5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-green-800 mb-1",children:"隆xito!"}),(0,r.jsx)("p",{className:"text-green-700",children:x})]})]}),(0,r.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Sucursal *"}),(0,r.jsx)("input",{type:"text",required:!0,value:j.nombre,onChange:e=>y({...j,nombre:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Matriz - Quito"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tel茅fono *"}),(0,r.jsx)("input",{type:"text",required:!0,value:j.telefono,onChange:e=>y({...j,telefono:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: 02-1234567"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direcci贸n *"}),(0,r.jsx)("textarea",{required:!0,value:j.direccion,onChange:e=>y({...j,direccion:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese la direcci贸n completa de la sucursal"})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"Ubicaci贸n en Mapa (Opcional)"})]}),(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:b,onChange:e=>f(e.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Ubicar en mapa"})]})]}),b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{initialLat:j.latitud,initialLng:j.longitud,onLocationChange:(e,r)=>{y({...j,latitud:e,longitud:r})},apiKey:"AIzaSyBphXV4dmmrn0Ps0VBQTXHth7kLYmd4mMw"}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:j.mostrar_en_mapa,onChange:e=>y({...j,mostrar_en_mapa:e.target.checked}),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("span",{className:"text-sm text-gray-700",children:"Mostrar esta sucursal en el mapa p煤blico del e-commerce"})]})})]}),(0,r.jsxs)("div",{className:"mt-3 flex items-start",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"til para negocios con tienda f铆sica. Permite a tus clientes encontrarte f谩cilmente en el mapa de tu sitio web."})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,r.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"C贸digos para Facturaci贸n Electr贸nica (SRI)"]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"C贸digo de Establecimiento *"}),(0,r.jsx)("input",{type:"text",required:!0,maxLength:3,pattern:"[0-9]{3}",value:j.codigo_establecimiento,onChange:e=>y({...j,codigo_establecimiento:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"001"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"3 d铆gitos (Ej: 001)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Punto de Emisi贸n *"}),(0,r.jsx)("input",{type:"text",required:!0,maxLength:3,pattern:"[0-9]{3}",value:j.punto_emision,onChange:e=>y({...j,punto_emision:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"001"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"3 d铆gitos (Ej: 001)"})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-start",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mr-2 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Estos c贸digos son requeridos por el SRI para la facturaci贸n electr贸nica. Para la sucursal matriz, generalmente se usa 001-001."})]})]}),(0,r.jsx)("div",{className:"flex gap-4 pt-6",children:(0,r.jsx)("button",{type:"submit",disabled:d,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:d?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creando sucursal..."]}):"Crear Sucursal Matriz"})})]})]}),(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Despu茅s de crear la sucursal matriz, podr谩s acceder al dashboard y configurar usuarios, productos e inventario."})})]})})})}e.s(["default",()=>i])},6294,e=>{e.v(r=>Promise.all(["static/chunks/ac9a0417c756bddd.js","static/chunks/24bc116ce64d9248.js"].map(r=>e.l(r))).then(()=>r(79609)))}]);