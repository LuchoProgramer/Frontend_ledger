(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15788,e=>{"use strict";let t=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>t],15788)},18566,(e,t,s)=>{t.exports=e.r(76562)},75254,e=>{"use strict";var t=e.i(71645);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:n,iconNode:c,...o},m)=>(0,t.createElement)("svg",{ref:m,...a,width:s,height:s,stroke:e,strokeWidth:l?24*Number(i)/Number(s):i,className:r("lucide",d),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...c.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(n)?n:[n]])),l=(e,a)=>{let l=(0,t.forwardRef)(({className:l,...d},n)=>(0,t.createElement)(i,{ref:n,iconNode:a,className:r(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...d}));return l.displayName=s(e),l};e.s(["default",()=>l],75254)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},2525,e=>{"use strict";var t=e.i(18050),s=e.i(71645),r=e.i(18566),a=e.i(74080),i=e.i(57951),l=e.i(9165),d=e.i(83639);function n(){let{user:e,loading:n,isAdmin:c}=(0,i.useAuth)(),o=(0,r.useRouter)(),[m,x]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[g,p]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),[v,k]=(0,s.useState)({nombre:"",descripcion:"",google_category_id:""}),[C,E]=(0,s.useState)(!1);(0,s.useEffect)(()=>{y(!0),n||c||o.push("/")},[n,c,o]);let A=(0,s.useCallback)(async()=>{try{h(!0);let e=(0,l.getApiClient)(),t=await e.getCategorias();t.success&&t.data?x(t.data):p(t.error||"Error al cargar categorías")}catch(e){p("Error de conexión al cargar categorías")}finally{h(!1)}},[]);(0,s.useEffect)(()=>{c&&A()},[c,A]);let S=e=>{N(e.id),k({nombre:e.nombre,descripcion:e.descripcion||"",google_category_id:e.google_category_id||""}),j(!0),p("")},_=async e=>{e.preventDefault(),E(!0),p("");try{let e,t=(0,l.getApiClient)();if((e=w?await t.actualizarCategoria(w,v):await t.crearCategoria(v)).success)j(!1),A();else{let t="string"==typeof e.error?e.error:JSON.stringify(e.error);p(t||"Error al guardar")}}catch(e){p(e.message||"Error al guardar")}finally{E(!1)}},M=async e=>{if(window.confirm("¿Estás seguro de eliminar esta categoría?"))try{let t=(0,l.getApiClient)(),s=await t.eliminarCategoria(e);s.success?A():alert(s.error||"Error al eliminar")}catch(e){alert("Error al eliminar")}};return n||u&&0===m.length?(0,t.jsx)(d.default,{children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):(0,t.jsxs)(d.default,{children:[(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Categorías"}),(0,t.jsxs)("button",{onClick:()=>{N(null),k({nombre:"",descripcion:"",google_category_id:""}),j(!0),p("")},className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center justify-center",children:[(0,t.jsx)("span",{className:"mr-2",children:"+"})," Nueva Categoría"]})]}),g&&(0,t.jsx)("div",{className:"mb-4 bg-red-50 border-l-4 border-red-500 p-4 text-red-700",children:g}),(0,t.jsx)("div",{className:"hidden md:block bg-white shadow overflow-hidden sm:rounded-lg",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===m.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No hay categorías registradas"})}):m.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.nombre}),(0,t.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.descripcion}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,t.jsx)("button",{onClick:()=>S(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Editar"}),(0,t.jsx)("button",{onClick:()=>M(e.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},e.id))})]})}),(0,t.jsx)("div",{className:"md:hidden space-y-4",children:0===m.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500 bg-white rounded-lg shadow",children:"No hay categorías registradas"}):m.map(e=>(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.nombre}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.descripcion||"Sin descripción"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 border-t pt-3",children:[(0,t.jsx)("button",{onClick:()=>S(e),className:"text-indigo-600 font-medium text-sm px-3 py-1 bg-indigo-50 rounded",children:"Editar"}),(0,t.jsx)("button",{onClick:()=>M(e.id),className:"text-red-600 font-medium text-sm px-3 py-1 bg-red-50 rounded",children:"Eliminar"})]})]},e.id))})]}),f&&b&&(0,a.createPortal)((0,t.jsx)("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:()=>j(!1)})}),(0,t.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,t.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full relative z-[10000]",children:(0,t.jsxs)("form",{onSubmit:_,children:[(0,t.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,t.jsx)("div",{className:"sm:flex sm:items-start",children:(0,t.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:w?"Editar Categoría":"Nueva Categoría"}),(0,t.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,t.jsx)("input",{type:"text",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:v.nombre,onChange:e=>k({...v,nombre:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Descripción"}),(0,t.jsx)("textarea",{rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:v.descripcion,onChange:e=>k({...v,descripcion:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"ID Google Merchant (Opcional)"}),(0,t.jsx)("input",{type:"text",placeholder:"Ej: 436 (Aguas), 499678 (Whisky)",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:v.google_category_id,onChange:e=>k({...v,google_category_id:e.target.value})})]})]})]})})}),(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,t.jsx)("button",{type:"submit",disabled:C,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",children:C?"Guardando...":"Guardar"}),(0,t.jsx)("button",{type:"button",onClick:()=>j(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})})]})}),document.body)]})}e.s(["default",()=>n])}]);