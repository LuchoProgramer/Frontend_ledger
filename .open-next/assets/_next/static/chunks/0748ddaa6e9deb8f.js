(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15788,e=>{"use strict";let s=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>s],15788)},18566,(e,s,t)=>{s.exports=e.r(76562)},75254,e=>{"use strict";var s=e.i(71645);let t=e=>{let s=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase());return s.charAt(0).toUpperCase()+s.slice(1)},a=(...e)=>e.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:n="",children:d,iconNode:o,...c},m)=>(0,s.createElement)("svg",{ref:m,...r,width:t,height:t,stroke:e,strokeWidth:l?24*Number(i)/Number(t):i,className:a("lucide",n),...!d&&!(e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0})(c)&&{"aria-hidden":"true"},...c},[...o.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(d)?d:[d]])),l=(e,r)=>{let l=(0,s.forwardRef)(({className:l,...n},d)=>(0,s.createElement)(i,{ref:d,iconNode:r,className:a(`lucide-${t(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...n}));return l.displayName=t(e),l};e.s(["default",()=>l],75254)},7233,e=>{"use strict";let s=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},36786,e=>{"use strict";var s=e.i(18050),t=e.i(71645),a=e.i(74080);function r({children:e,isOpen:r,onClose:i}){let[l,n]=(0,t.useState)(!1);return((0,t.useEffect)(()=>(n(!0),()=>n(!1)),[]),(0,t.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),l&&r)?(0,a.createPortal)((0,s.jsx)("div",{className:"fixed inset-0 z-[99999] overflow-y-auto",role:"dialog","aria-modal":"true",children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-900/50 backdrop-blur-sm","aria-hidden":"true",onClick:i}),(0,s.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full relative z-[10000]",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 pt-4 pr-4 block",children:(0,s.jsxs)("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:i,children:[(0,s.jsx)("span",{className:"sr-only",children:"Cerrar"}),(0,s.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})}),e]})]})}),document.body):null}e.s(["default",()=>r])},6661,e=>{"use strict";var s=e.i(18050),t=e.i(71645),a=e.i(18566),r=e.i(57951),i=e.i(36786),l=e.i(9165),n=e.i(83639);function d(){let{user:e,loading:d,isAdmin:o}=(0,r.useAuth)(),c=(0,a.useRouter)(),[m,u]=(0,t.useState)([]),[x,g]=(0,t.useState)([]),[h,p]=(0,t.useState)([]),[b,f]=(0,t.useState)(!0),[j,y]=(0,t.useState)(""),[v,N]=(0,t.useState)(""),[w,k]=(0,t.useState)(void 0),[_,C]=(0,t.useState)(""),[S,A]=(0,t.useState)(!1),[z,E]=(0,t.useState)(!1),[D,L]=(0,t.useState)(!1),[T,P]=(0,t.useState)(!1),[R,I]=(0,t.useState)({producto_id:0,sucursal_id:0,tipo:"ENTRADA",cantidad:"",motivo:""}),[M,O]=(0,t.useState)({producto_id:0,origen_id:0,destino_id:0,cantidad:"",generar_guia:!1,transportista_ruc:"",transportista_razon_social:"",transportista_placa:""});(0,t.useEffect)(()=>{d||e||c.push("/login")},[d,e,c]);let[B,F]=(0,t.useState)("detalle"),[U,$]=(0,t.useState)([]),G=(0,t.useCallback)(async()=>{try{f(!0);let e=(0,l.getApiClient)(),s=!w,[t,a,r]=await Promise.all([e.getInventario({sucursal:w,search:_,agrupado:s}),e.getSucursalesList({page_size:100}),e.getProductos({page_size:100,activo:!0})]);t.results&&u(t.results),t.mode&&F(t.mode),a.results&&g(a.results),r.results&&p(r.results)}catch(e){y(e.message||"Error cargando datos")}finally{f(!1)}},[w,_]),q=e=>{$(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};(0,t.useEffect)(()=>{e&&G()},[e,G]);let W=async e=>{e.preventDefault(),P(!0),y(""),N("");try{let e=(0,l.getApiClient)();await e.ajusteInventario({...R,cantidad:Number(R.cantidad)}),N("Ajuste realizado correctamente"),A(!1),G()}catch(e){y(e.message||"Error al realizar ajuste")}finally{P(!1)}},H=async e=>{if(e.preventDefault(),P(!0),y(""),N(""),M.origen_id===M.destino_id){y("La sucursal de origen y destino no pueden ser la misma"),P(!1);return}try{let e=(0,l.getApiClient)(),s={producto_id:M.producto_id,origen_id:M.origen_id,destino_id:M.destino_id,cantidad:Number(M.cantidad),generar_guia:M.generar_guia};if(M.generar_guia){if(!M.transportista_ruc||!M.transportista_razon_social){y("Debe completar RUC y Razón Social del transportista"),P(!1);return}s.transportista={ruc:M.transportista_ruc,razon_social:M.transportista_razon_social,placa:M.transportista_placa}}await e.transferenciaInventario(s),N("Transferencia realizada correctamente"),E(!1),G()}catch(e){y(e.message||"Error al realizar transferencia")}finally{P(!1)}},K=async()=>{try{let e=(0,l.getApiClient)(),s=await e.downloadPlantillaInventario(),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="plantilla_inventario.xlsx",a.click()}catch(e){y("Error descargando plantilla")}},V=async e=>{e.preventDefault();let s=e.currentTarget,t=s.elements.namedItem("file"),a=s.elements.namedItem("sucursal_id");if(!t.files||0===t.files.length)return void y("Seleccione un archivo");P(!0),y(""),N("");try{let e=(0,l.getApiClient)(),s=await e.uploadInventario(t.files[0],Number(a.value));s.success?(N(s.message),L(!1),G()):y(`Error: ${s.errors.join(", ")}`)}catch(e){y(e.message||"Error en carga masiva")}finally{P(!1)}},Z=e=>{I({producto_id:e?e.producto:h[0]?.id||0,sucursal_id:e?.sucursal??(x[0]?.id||0),tipo:"ENTRADA",cantidad:"",motivo:""}),A(!0)};return d||b&&0===m.length&&0===x.length?(0,s.jsx)(n.default,{children:(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):(0,s.jsx)(n.default,{children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"md:flex md:items-center md:justify-between mb-6",children:[(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:"Gestión de Inventario"})}),(0,s.jsxs)("div",{className:"mt-4 flex md:mt-0 md:ml-4 space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>L(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Importar Excel"}),(0,s.jsx)("button",{type:"button",onClick:()=>E(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Transferir Stock"}),(0,s.jsx)("button",{type:"button",onClick:()=>Z(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Nuevo Ajuste"})]})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow mb-6 flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700",children:"Buscar Producto"}),(0,s.jsx)("input",{type:"text",name:"search",id:"search",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Nombre o código...",value:_,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"sucursal",className:"block text-sm font-medium text-gray-700",children:"Sucursal"}),(0,s.jsxs)("select",{id:"sucursal",name:"sucursal",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:w||"",onChange:e=>k(e.target.value?Number(e.target.value):void 0),children:[(0,s.jsx)("option",{value:"",children:"Todas"}),x.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]})]}),j&&(0,s.jsx)("div",{className:"rounded-md bg-red-50 p-4 mb-6",children:(0,s.jsx)("div",{className:"flex",children:(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("h3",{className:"text-sm font-medium text-red-800",children:j})})})}),v&&(0,s.jsx)("div",{className:"rounded-md bg-green-50 p-4 mb-6",children:(0,s.jsx)("div",{className:"flex",children:(0,s.jsx)("div",{className:"ml-3",children:(0,s.jsx)("h3",{className:"text-sm font-medium text-green-800",children:v})})})}),(0,s.jsx)("div",{className:"hidden md:block flex flex-col",children:(0,s.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,s.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sucursal"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actualizado"}),(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===m.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No se encontraron registros de inventario."})}):m.map(e=>{let t="agrupado"===B,a=e.producto_nombre||e.nombre,r=e.producto_codigo||e.codigo_producto,i=t?e.stock_total_global:e.cantidad,l=U.includes(e.id);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("tr",{className:l&&t?"bg-gray-50":"",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[t&&e.desglose&&e.desglose.length>0&&(0,s.jsx)("button",{onClick:()=>q(e.id),className:"mr-2 text-gray-400 hover:text-gray-600 focus:outline-none",children:l?(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:r})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t?(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Global (",e.desglose?.length||0," sucursales)"]}):e.sucursal_nombre}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Number(i)>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Number(i).toFixed(2)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.fecha_actualizacion?new Date(e.fecha_actualizacion).toLocaleDateString():"-"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:!t&&(0,s.jsx)("button",{onClick:()=>Z(e),className:"text-indigo-600 hover:text-indigo-900",children:"Ajustar"})})]},e.id),t&&l&&e.desglose?.map(e=>(0,s.jsxs)("tr",{className:"bg-gray-50",children:[(0,s.jsxs)("td",{className:"px-6 py-2 whitespace-nowrap pl-14",children:[(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"└"}),(0,s.jsxs)("span",{className:"ml-1 text-sm text-gray-500",children:["En ",e.sucursal_nombre]})]}),(0,s.jsx)("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-500",children:e.sucursal_nombre}),(0,s.jsx)("td",{className:"px-6 py-2 whitespace-nowrap",children:(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:Number(e.cantidad).toFixed(2)})}),(0,s.jsx)("td",{colSpan:2,className:"px-6 py-2"})]},`sub-${e.id}`))]})})})]})})})})}),(0,s.jsx)("div",{className:"md:hidden space-y-4",children:0===m.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500 bg-white rounded-lg shadow",children:"No se encontraron registros de inventario."}):m.map(e=>{let t="agrupado"===B,a=e.producto_nombre||e.nombre,r=e.producto_codigo||e.codigo_producto,i=t?e.stock_total_global:e.cantidad,l=U.includes(e.id);return(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{onClick:()=>t&&q(e.id),className:t?"cursor-pointer":"",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[a,t&&(0,s.jsx)("span",{className:"ml-2 text-xs text-blue-600",children:l?"▲":"▼"})]}),(0,s.jsx)("p",{className:"text-sm font-mono text-gray-500 mt-1",children:r})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[(0,s.jsxs)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Number(i)>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:["Stock: ",Number(i).toFixed(2)]}),(0,s.jsx)("span",{className:"text-xs text-gray-400 mt-1",children:t?"Global":e.sucursal_nombre})]})]}),t&&l&&(0,s.jsx)("div",{className:"mt-3 border-t pt-2 bg-gray-50 rounded p-2",children:e.desglose?.map(e=>(0,s.jsxs)("div",{className:"flex justify-between py-1 text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:e.sucursal_nombre}),(0,s.jsx)("span",{className:"font-medium",children:Number(e.cantidad).toFixed(2)})]},e.id))}),(0,s.jsxs)("div",{className:"flex justify-between items-center border-t pt-3 mt-3",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["Act: ",e.fecha_actualizacion?new Date(e.fecha_actualizacion).toLocaleDateString():"-"]}),!t&&(0,s.jsx)("button",{onClick:()=>Z(e),className:"text-indigo-600 font-medium text-sm px-3 py-1 bg-indigo-50 rounded hover:bg-indigo-100",children:"Ajustar Stock"})]})]},e.id)})}),(0,s.jsx)(i.default,{isOpen:S,onClose:()=>A(!1),children:(0,s.jsxs)("form",{onSubmit:W,children:[(0,s.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Ajuste de Stock"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Producto"}),(0,s.jsx)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:R.producto_id,onChange:e=>I({...R,producto_id:Number(e.target.value)}),children:h.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Sucursal"}),(0,s.jsx)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:R.sucursal_id,onChange:e=>I({...R,sucursal_id:Number(e.target.value)}),children:x.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo Ajuste"}),(0,s.jsxs)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:R.tipo,onChange:e=>I({...R,tipo:e.target.value}),children:[(0,s.jsx)("option",{value:"ENTRADA",children:"ENTRADA (Agregar)"}),(0,s.jsx)("option",{value:"SALIDA",children:"SALIDA (Descontar)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cantidad"}),(0,s.jsx)("input",{type:"number",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:R.cantidad,onChange:e=>I({...R,cantidad:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Motivo"}),(0,s.jsx)("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:R.motivo,onChange:e=>I({...R,motivo:e.target.value}),required:!0})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,s.jsx)("button",{type:"submit",disabled:T,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",children:T?"Guardando...":"Guardar Ajuste"}),(0,s.jsx)("button",{type:"button",onClick:()=>A(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})}),(0,s.jsx)(i.default,{isOpen:z,onClose:()=>E(!1),children:(0,s.jsxs)("form",{onSubmit:H,children:[(0,s.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Transferencia entre Sucursales"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Producto"}),(0,s.jsxs)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:M.producto_id,onChange:e=>O({...M,producto_id:Number(e.target.value)}),children:[(0,s.jsx)("option",{value:0,children:"Seleccione Producto"}),h.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Origen"}),(0,s.jsxs)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:M.origen_id,onChange:e=>O({...M,origen_id:Number(e.target.value)}),children:[(0,s.jsx)("option",{value:0,children:"Seleccione Origen"}),x.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Destino"}),(0,s.jsxs)("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:M.destino_id,onChange:e=>O({...M,destino_id:Number(e.target.value)}),children:[(0,s.jsx)("option",{value:0,children:"Seleccione Destino"}),x.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cantidad"}),(0,s.jsx)("input",{type:"number",step:"0.01",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:M.cantidad,onChange:e=>O({...M,cantidad:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"generar_guia",name:"generar_guia",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:M.generar_guia,onChange:e=>O({...M,generar_guia:e.target.checked})}),(0,s.jsx)("label",{htmlFor:"generar_guia",className:"ml-2 block text-sm text-gray-900",children:"Generar Guía de Remisión (SRI)"})]}),M.generar_guia&&(0,s.jsxs)("div",{className:"mt-4 space-y-3 bg-gray-50 p-3 rounded-md",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Datos Transportista"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"RUC Transp."}),(0,s.jsx)("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:M.transportista_ruc,onChange:e=>O({...M,transportista_ruc:e.target.value}),placeholder:"17...",maxLength:13})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Razón Social"}),(0,s.jsx)("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:M.transportista_razon_social,onChange:e=>O({...M,transportista_razon_social:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Placa (Opcional)"}),(0,s.jsx)("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:M.transportista_placa,onChange:e=>O({...M,transportista_placa:e.target.value}),placeholder:"ABC-1234"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,s.jsx)("button",{type:"submit",disabled:T,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",children:T?"Procesando...":"Transferir Stock"}),(0,s.jsx)("button",{type:"button",onClick:()=>E(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})}),(0,s.jsx)(i.default,{isOpen:D,onClose:()=>L(!1),children:(0,s.jsxs)("form",{onSubmit:V,children:[(0,s.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Carga Masiva de Inventario"}),(0,s.jsx)("button",{type:"button",onClick:K,className:"text-sm text-indigo-600 hover:text-indigo-900 font-medium",children:"Descargar Plantilla"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Sucursal Destino"}),(0,s.jsx)("select",{name:"sucursal_id",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",defaultValue:w||x[0]?.id,children:x.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:'El stock se ajustará ("set") para los productos en el archivo.'})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Archivo Excel (.xlsx)"}),(0,s.jsx)("input",{type:"file",name:"file",accept:".xlsx, .xls, .csv",className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",required:!0})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,s.jsx)("button",{type:"submit",disabled:T,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",children:T?"Procesando...":"Cargar Inventario"}),(0,s.jsx)("button",{type:"button",onClick:()=>L(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})})]})})}e.s(["default",()=>d])}]);