(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15788,e=>{"use strict";let t=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>t],15788)},18566,(e,t,a)=>{t.exports=e.r(76562)},75254,e=>{"use strict";var t=e.i(71645);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},s=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:d="",children:n,iconNode:o,...c},x)=>(0,t.createElement)("svg",{ref:x,...r,width:a,height:a,stroke:e,strokeWidth:l?24*Number(i)/Number(a):i,className:s("lucide",d),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...o.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(n)?n:[n]])),l=(e,r)=>{let l=(0,t.forwardRef)(({className:l,...d},n)=>(0,t.createElement)(i,{ref:n,iconNode:r,className:s(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...d}));return l.displayName=a(e),l};e.s(["default",()=>l],75254)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},77623,e=>{"use strict";var t=e.i(18050),a=e.i(71645),s=e.i(18566),r=e.i(83639),i=e.i(9165),l=e.i(15788),d=e.i(7233),n=e.i(78583);let o=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var c=e.i(40160);function x(){let e=(0,s.useRouter)(),[x,g]=(0,a.useState)([]),[m,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(""),[b,y]=(0,a.useState)(""),[j,f]=(0,a.useState)(""),[N,v]=(0,a.useState)(1),[w,k]=(0,a.useState)(1),[E,A]=(0,a.useState)(""),D=(0,i.getApiClient)(),C=async()=>{u(!0);try{let e=await D.getGuias({page:N,start_date:h,end_date:b,search:j,estado_sri:E});g(e.results||[]),e.count&&k(Math.ceil(e.count/20))}catch(e){console.error("Error cargando guÃ­as",e)}finally{u(!1)}};(0,a.useEffect)(()=>{let e=setTimeout(()=>{C()},500);return()=>clearTimeout(e)},[N,h,b,j,E]),(0,a.useEffect)(()=>{if(!x.some(e=>"PPR"===e.estado_sri))return;let e=setInterval(()=>{console.log("Auto-refreshing guÃ­as en procesamiento..."),C()},1e4);return()=>clearInterval(e)},[x]);let _=e=>{let a={AUT:{bg:"bg-green-100",text:"text-green-800",label:"AUTORIZADO"},PPR:{bg:"bg-yellow-100",text:"text-yellow-800",label:"PROCESANDO"},NAT:{bg:"bg-red-100",text:"text-red-800",label:"NO AUTORIZADO"},DEV:{bg:"bg-orange-100",text:"text-orange-800",label:"DEVUELTA"}}[e]||{bg:"bg-gray-100",text:"text-gray-800",label:"PENDIENTE"};return(0,t.jsx)("span",{className:`px-2.5 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${a.bg} ${a.text}`,children:a.label})};return(0,t.jsx)(r.default,{children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,t.jsx)(l.Truck,{className:"w-8 h-8 text-indigo-600"}),"GuÃ­as de RemisiÃ³n"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Gestiona tus documentos de transporte"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>C(),className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:"ðŸ”„ Actualizar"}),(0,t.jsxs)("button",{onClick:()=>e.push("/guias/nueva"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow-sm flex items-center gap-2",children:[(0,t.jsx)(d.Plus,{className:"w-4 h-4"}),"Nueva GuÃ­a"]})]})]}),(0,t.jsx)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm mb-6 border border-gray-100",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Desde"}),(0,t.jsx)("input",{type:"date",value:h,onChange:e=>{p(e.target.value),v(1)},className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hasta"}),(0,t.jsx)("input",{type:"date",value:b,onChange:e=>{y(e.target.value),v(1)},className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),(0,t.jsxs)("select",{value:E,onChange:e=>{A(e.target.value),v(1)},className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,t.jsx)("option",{value:"",children:"Todos"}),(0,t.jsx)("option",{value:"AUT",children:"Autorizados"}),(0,t.jsx)("option",{value:"PPR",children:"Procesando"}),(0,t.jsx)("option",{value:"NAT",children:"No Autorizados"}),(0,t.jsx)("option",{value:"DEV",children:"Devueltos"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),(0,t.jsx)("input",{type:"text",placeholder:"Destinatario, Placa...",value:j,onChange:e=>{f(e.target.value),v(1)},className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]})}),(0,t.jsx)("div",{className:"hidden lg:block bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Fecha / NÃºmero"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Destinatario"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Transportista"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Motivo"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Estado"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Acciones"})]})}),(0,t.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[m&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:(0,t.jsxs)("div",{className:"flex justify-center items-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),(0,t.jsx)("span",{className:"ml-3",children:"Cargando..."})]})})}),!m&&0===x.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No hay guÃ­as de remisiÃ³n registradas"})}),x.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.numero_autorizacion}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.fecha_emision).toLocaleDateString("es-EC")})]}),(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.destinatarios?.[0]?.razon_social||"Varios Destinatarios"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.destinatarios?.[0]?.direccion_destinatario})]}),(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.razon_social_transportista}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.placa_vehiculo})]}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs font-medium",children:e.destinatarios?.[0]?.motivo_traslado||e.motivo_traslado||"Traslado"})}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:_(e.estado_sri||"PENDIENTE")}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,t.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,t.jsx)("button",{onClick:async()=>{try{await D.descargarGuiaPDF(e.id,`guia_${e.numero_autorizacion}.pdf`)}catch(e){alert("Error descargando PDF")}},className:"p-1.5 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Descargar RIDE (PDF)",children:(0,t.jsx)(n.FileText,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:async()=>{try{let t=await D.descargarGuiaXML(e.id),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`guia_${e.numero_autorizacion}.xml`,s.click()}catch(e){alert("Error descargando XML")}},className:"p-1.5 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"Descargar XML",children:(0,t.jsx)(c.Download,{className:"w-4 h-4"})}),"AUT"!==e.estado_sri&&(0,t.jsx)("button",{onClick:async()=>{if(confirm("Â¿Enviar GuÃ­a al SRI?"))try{await D.enviarGuiaSRI(e.id),alert("Enviada. El estado se actualizarÃ¡ en breve."),C()}catch(e){alert("Error enviando al SRI: "+(e.message||e.toString()))}},className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Enviar al SRI",children:(0,t.jsx)(o,{className:"w-4 h-4"})})]})})]},e.id))]})]})})}),(0,t.jsx)("div",{className:"lg:hidden space-y-4",children:x.map(e=>(0,t.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.numero_autorizacion}),_(e.estado_sri)]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:["Destino: ",e.destinatarios?.[0]?.razon_social]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,t.jsx)("button",{className:"flex-1 py-2 bg-indigo-50 text-indigo-700 text-xs rounded font-medium",onClick:()=>D.descargarGuiaPDF(e.id),children:"PDF"}),"AUT"!==e.estado_sri&&(0,t.jsx)("button",{className:"flex-1 py-2 bg-green-50 text-green-700 text-xs rounded font-medium",onClick:()=>D.enviarGuiaSRI(e.id),children:"SRI"})]})]},e.id))}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mt-6",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["PÃ¡gina ",(0,t.jsx)("span",{className:"font-semibold",children:N})," de ",(0,t.jsx)("span",{className:"font-semibold",children:w})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{disabled:N<=1,onClick:()=>v(e=>e-1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"â† Anterior"}),(0,t.jsx)("button",{disabled:N>=w,onClick:()=>v(e=>e+1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Siguiente â†’"})]})]})]})})}e.s(["default",()=>x],77623)}]);