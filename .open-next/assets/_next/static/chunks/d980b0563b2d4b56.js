(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15788,e=>{"use strict";let r=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>r],15788)},18566,(e,r,a)=>{r.exports=e.r(76562)},75254,e=>{"use strict";var r=e.i(71645);let a=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},t=(...e)=>e.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,iconNode:d,...n},u)=>(0,r.createElement)("svg",{ref:u,...s,width:a,height:a,stroke:e,strokeWidth:l?24*Number(i)/Number(a):i,className:t("lucide",o),...!c&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(n)&&{"aria-hidden":"true"},...n},[...d.map(([e,a])=>(0,r.createElement)(e,a)),...Array.isArray(c)?c:[c]])),l=(e,s)=>{let l=(0,r.forwardRef)(({className:l,...o},c)=>(0,r.createElement)(i,{ref:c,iconNode:s,className:t(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...o}));return l.displayName=a(e),l};e.s(["default",()=>l],75254)},7233,e=>{"use strict";let r=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],7233)},55436,e=>{"use strict";let r=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>r],55436)},63209,e=>{"use strict";let r=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>r],63209)},72520,e=>{"use strict";let r=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>r],72520)},71048,e=>{"use strict";var r=e.i(18050),a=e.i(71645),t=e.i(18566),s=e.i(83639),i=e.i(9165),l=e.i(15788),o=e.i(1928),c=e.i(55436),d=e.i(72520);let n=(0,e.i(75254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var u=e.i(63209);function x(){let e=(0,t.useRouter)(),x=(0,i.getApiClient)(),[m,g]=(0,a.useState)("SELECTION"),[p,y]=(0,a.useState)([]),[b,f]=(0,a.useState)(""),[j,v]=(0,a.useState)(null),[N,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)({ruc:"",razon_social:"",placa:""}),[A,S]=(0,a.useState)(!1),[T,_]=(0,a.useState)(""),z=async e=>{w(!0);try{let r=await x.getFacturas({search:e,page:1,estado_sri:"AUT"});y(r.results)}catch(e){console.error(e)}finally{w(!1)}};(0,a.useEffect)(()=>{if("VENTA"===m){let e=setTimeout(()=>{z(b)},500);return()=>clearTimeout(e)}},[b,m]);let E=async r=>{if(r.preventDefault(),_(""),!j)return void _("Debe seleccionar una factura.");if(!k.ruc||!k.razon_social||!k.placa)return void _("Todos los datos del transportista son obligatorios.");S(!0);try{let r={tipo_guia:"VENTA",factura_id:j.id,transportista:{ruc:k.ruc,razon_social:k.razon_social,placa:k.placa},destinatario:{}};await x.crearGuia(r),e.push("/guias")}catch(e){console.error(e),_(e.message||"Error al crear la guía")}finally{S(!1)}};return"SELECTION"===m?(0,r.jsx)(s.default,{children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Nueva Guía de Remisión"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{onClick:()=>g("VENTA"),className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 hover:border-indigo-500 hover:shadow-md cursor-pointer transition-all group",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors",children:(0,r.jsx)(o.ShoppingCart,{className:"w-8 h-8 text-indigo-600 group-hover:text-white"})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Por Venta a Cliente"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Generar guía a partir de una Factura existente. Utiliza los datos del cliente y productos de la factura."})]}),(0,r.jsxs)("div",{onClick:()=>e.push("/inventario"),className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100 hover:border-green-500 hover:shadow-md cursor-pointer transition-all group",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-6 group-hover:bg-green-600 transition-colors",children:(0,r.jsx)(l.Truck,{className:"w-8 h-8 text-green-600 group-hover:text-white"})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Traslado entre Sucursales"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Mover mercadería entre mis propios locales. (Gestionar desde módulo Inventario)."})]})]})]})}):(0,r.jsx)(s.default,{children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto p-6",children:[(0,r.jsx)("button",{onClick:()=>g("SELECTION"),className:"mb-6 text-sm text-gray-500 hover:text-gray-900 flex items-center gap-1",children:"← Volver"}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Nueva Guía por Venta"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Seleccione la factura y asigne el transportista"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar Factura Autorizada"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(c.Search,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Buscar por cliente o número...",value:b,onChange:e=>f(e.target.value)})]}),N&&(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Buscando..."}),(0,r.jsx)("div",{className:"mt-2 max-h-60 overflow-y-auto border border-gray-100 rounded-lg",children:p.map(e=>(0,r.jsxs)("div",{onClick:()=>{v(e),f("")},className:`p-3 cursor-pointer hover:bg-gray-50 flex justify-between items-center ${j?.id===e.id?"bg-indigo-50 border-indigo-200":""}`,children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.numero_autorizacion," - ",e.cliente_nombre]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.fecha_emision," | Total: $",e.total_con_impuestos]})]}),j?.id===e.id&&(0,r.jsx)("div",{className:"w-3 h-3 bg-indigo-600 rounded-full"})]},e.id))}),j&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-indigo-50 rounded-lg border border-indigo-100 flex items-start gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-indigo-100 rounded-full",children:(0,r.jsx)(h,{className:"w-5 h-5 text-indigo-700"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-indigo-900",children:"Factura Seleccionada"}),(0,r.jsx)("p",{className:"text-sm text-indigo-700",children:j.numero_autorizacion}),(0,r.jsxs)("p",{className:"text-xs text-indigo-600",children:["Cliente: ",j.cliente_nombre]})]})]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-100 pt-6",children:[(0,r.jsxs)("h3",{className:"text-md font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,r.jsx)(n,{className:"w-5 h-5 text-gray-500"}),"Datos del Transportista"]}),(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 uppercase mb-1",children:"Cédula / RUC Chofer"}),(0,r.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",value:k.ruc,onChange:e=>C({...k,ruc:e.target.value}),placeholder:"171..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 uppercase mb-1",children:"Nombre / Razón Social"}),(0,r.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",value:k.razon_social,onChange:e=>C({...k,razon_social:e.target.value}),placeholder:"Juan Perez"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 uppercase mb-1",children:"Placa Vehículo"}),(0,r.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",value:k.placa,onChange:e=>C({...k,placa:e.target.value}),placeholder:"PBA-1234"})]})]})]}),T&&(0,r.jsxs)("div",{className:"p-3 bg-red-50 text-red-700 rounded-lg text-sm flex items-center gap-2",children:[(0,r.jsx)(u.AlertCircle,{className:"w-4 h-4"}),T]}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsxs)("button",{onClick:E,disabled:A,className:"px-6 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-shadow shadow-md flex items-center gap-2 disabled:opacity-50",children:[A?"Generando...":"Generar Guía",!A&&(0,r.jsx)(d.ArrowRight,{className:"w-4 h-4"})]})})]})]})]})})}function h({className:e}){return(0,r.jsxs)("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),(0,r.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,r.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,r.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,r.jsx)("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]})}e.s(["default",()=>x],71048)}]);