(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,r)=>{s.exports=e.r(76562)},94542,e=>{"use strict";var s=e.i(18050),r=e.i(71645),t=e.i(18566),a=e.i(9165),i=e.i(57951);function o(){let e=(0,t.useRouter)(),{login:o,isAuthenticated:n,loading:l}=(0,i.useAuth)(),[d,c]=(0,r.useState)({username:"",password:""}),[u,m]=(0,r.useState)(""),[x,g]=(0,r.useState)(!1),[h,p]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=window.location.hostname;"localhost"===e||"127.0.0.1"===e?p("Público"):p(e.split(".")[0].replace(/-/g," ").toUpperCase())},[]),(0,r.useEffect)(()=>{!l&&n&&e.push("/")},[l,n,e]);let b=async s=>{s.preventDefault(),m(""),g(!0);try{let s=await (0,a.login)(d.username,d.password);if(s.success&&s.user){o(s.user);let r=s.user,t=(r.is_staff||r.groups?.includes("Administrador"),r.groups?.includes("Usuarios"));await new Promise(e=>setTimeout(e,200)),console.log("Verificando turno para usuario:",r.username);let i=await (0,a.getTurnoActivo)();console.log("Respuesta de turno:",i),i.success||console.warn("getTurnoActivo no fue exitoso:",i);let n=i.tiene_turno_activo||!1;t&&n?e.push("/pos"):e.push("/")}else m(s.error||"Credenciales inválidas")}catch(e){console.error("Error en login:",e),m(e.message||"Error de conexión. Por favor intente nuevamente.")}finally{g(!1)}};return l?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Verificando sesión..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-indigo-600 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("span",{className:"text-white font-bold text-2xl",children:"LX"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Iniciar Sesión"}),h&&(0,s.jsx)("p",{className:"text-gray-600",children:h})]}),u&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-red-700 text-sm",children:u})}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Usuario"}),(0,s.jsx)("input",{id:"username",type:"text",value:d.username,onChange:e=>c({...d,username:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Ingresa tu usuario",required:!0,disabled:x})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña"}),(0,s.jsx)("input",{id:"password",type:"password",value:d.password,onChange:e=>c({...d,password:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"••••••••",required:!0,disabled:x})]}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:x?"Iniciando sesión...":"Iniciar Sesión"})]}),(0,s.jsxs)("div",{className:"mt-6 text-center space-y-2",children:[(0,s.jsx)("a",{href:"#",className:"block text-sm text-indigo-600 hover:text-indigo-700",children:"¿Olvidaste tu contraseña?"}),(0,s.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["¿No tienes una empresa?"," ",(0,s.jsx)("a",{href:"https://ledgerxpertz.com/registro",className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Regístrate aquí"})]})})]})]})})}e.s(["default",()=>o])}]);