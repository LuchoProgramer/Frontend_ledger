(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,r,a)=>{r.exports=e.r(76562)},75254,e=>{"use strict";var r=e.i(71645);let a=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},t=(...e)=>e.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:n="",children:o,iconNode:c,...d},u)=>(0,r.createElement)("svg",{ref:u,...s,width:a,height:a,stroke:e,strokeWidth:l?24*Number(i)/Number(a):i,className:t("lucide",n),...!o&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,a])=>(0,r.createElement)(e,a)),...Array.isArray(o)?o:[o]])),l=(e,s)=>{let l=(0,r.forwardRef)(({className:l,...n},o)=>(0,r.createElement)(i,{ref:o,iconNode:s,className:t(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...n}));return l.displayName=a(e),l};e.s(["default",()=>l],75254)},15788,e=>{"use strict";let r=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>r],15788)},95468,e=>{"use strict";let r=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>r],95468)},56909,e=>{"use strict";let r=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>r],56909)},63209,e=>{"use strict";let r=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>r],63209)},55436,e=>{"use strict";let r=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>r],55436)},72520,e=>{"use strict";let r=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>r],72520)},54962,e=>{"use strict";var r=e.i(18050),a=e.i(71645),t=e.i(57951),s=e.i(15788),i=e.i(56909),l=e.i(55436),n=e.i(63209),o=e.i(95468),c=e.i(72520),d=e.i(18566);function u(){let{api:e}=(0,t.useAuth)(),u=(0,d.useRouter)(),[p,x]=(0,a.useState)(!0),[m,g]=(0,a.useState)(!1),[h,b]=(0,a.useState)([]),[y,f]=(0,a.useState)([]),[j,v]=(0,a.useState)({producto_id:"",origen_id:"",destino_id:"",cantidad:"",generar_guia:!1,transportista_ruc:"",transportista_razon_social:"",transportista_placa:""}),[_,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let[r,a]=await Promise.all([e.getProductos({page_size:100,activo:!0}),e.getSucursalesList({page_size:50})]);b(r.results||[]),f(a.results||[])}catch(e){N({type:"error",text:"Error cargando datos."}),console.error(e)}finally{x(!1)}})()},[e]);let k=async r=>{if(r.preventDefault(),g(!0),N(null),j.origen_id===j.destino_id){N({type:"error",text:"La sucursal de origen y destino no pueden ser la misma."}),g(!1);return}if(j.generar_guia&&(!j.transportista_ruc||!j.transportista_razon_social)){N({type:"error",text:"Para generar guía, complete RUC y Razón Social del transportista."}),g(!1);return}try{await e.transferenciaInventario({producto_id:parseInt(j.producto_id),origen_id:parseInt(j.origen_id),destino_id:parseInt(j.destino_id),cantidad:parseFloat(j.cantidad),generar_guia:j.generar_guia,transportista:j.generar_guia?{ruc:j.transportista_ruc,razon_social:j.transportista_razon_social,placa:j.transportista_placa}:void 0}),N({type:"success",text:"Transferencia realizada con éxito."}),v(e=>({...e,cantidad:"",producto_id:""}))}catch(e){N({type:"error",text:e.message||"Error al procesar transferencia."})}finally{g(!1)}};return p?(0,r.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Cargando..."}):(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-4 md:p-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,r.jsx)(s.Truck,{className:"w-8 h-8 text-blue-600"}),"Transferencias entre Sucursales"]}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"Mueve stock de una sucursal a otra y genera Guías de Remisión si es necesario."})]}),_&&(0,r.jsxs)("div",{className:`mb-6 p-4 rounded-lg flex items-start gap-3 ${"success"===_.type?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:["success"===_.type?(0,r.jsx)(o.CheckCircle2,{className:"w-5 h-5 shrink-0"}):(0,r.jsx)(n.AlertCircle,{className:"w-5 h-5 shrink-0"}),(0,r.jsx)("p",{children:_.text})]}),(0,r.jsxs)("form",{onSubmit:k,className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6 pb-2 border-b",children:"Detalles del Traslado"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 relative",children:[(0,r.jsx)("div",{className:"hidden md:block absolute left-1/2 top-9 -translate-x-1/2 bg-white p-2 z-10",children:(0,r.jsx)(c.ArrowRight,{className:"text-gray-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origen (Sale)"}),(0,r.jsxs)("select",{className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none bg-red-50/50",value:j.origen_id,onChange:e=>v({...j,origen_id:e.target.value}),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Seleccionar origen..."}),y.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destino (Entra)"}),(0,r.jsxs)("select",{className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none bg-green-50/50",value:j.destino_id,onChange:e=>v({...j,destino_id:e.target.value}),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Seleccionar destino..."}),y.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]})]}),(0,r.jsxs)("div",{className:"mt-8 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Producto a Transferir"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Search,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,r.jsxs)("select",{className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none appearance-none",value:j.producto_id,onChange:e=>v({...j,producto_id:e.target.value}),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Buscar producto..."}),h.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.codigo_producto," - ",e.nombre]},e.id))]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cantidad"}),(0,r.jsx)("input",{type:"number",step:"0.01",min:"0.01",placeholder:"0.00",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none",value:j.cantidad,onChange:e=>v({...j,cantidad:e.target.value}),required:!0})]})]})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:`bg-white rounded-xl shadow-sm border border-gray-200 p-6 transition-all ${j.generar_guia?"ring-2 ring-blue-500 border-transparent":""}`,children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 border-gray-300",checked:j.generar_guia,onChange:e=>v({...j,generar_guia:e.target.checked})}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:"Generar Guía de Remisión"})]})}),j.generar_guia&&(0,r.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-100 animate-in slide-in-from-top-2 fade-in",children:[(0,r.jsx)("p",{className:"text-xs text-blue-600 mb-2 font-medium",children:"Datos del Transportista (Requeridos)"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"RUC Transportista"}),(0,r.jsx)("input",{type:"text",className:"w-full px-3 py-2 rounded border border-gray-300 text-sm focus:border-blue-500 outline-none",value:j.transportista_ruc,onChange:e=>v({...j,transportista_ruc:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Razón Social"}),(0,r.jsx)("input",{type:"text",className:"w-full px-3 py-2 rounded border border-gray-300 text-sm focus:border-blue-500 outline-none",value:j.transportista_razon_social,onChange:e=>v({...j,transportista_razon_social:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Placa Vehículo"}),(0,r.jsx)("input",{type:"text",className:"w-full px-3 py-2 rounded border border-gray-300 text-sm focus:border-blue-500 outline-none",value:j.transportista_placa,onChange:e=>v({...j,transportista_placa:e.target.value})})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("button",{type:"submit",disabled:m,className:`w-full flex items-center justify-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-xl shadow-lg hover:bg-blue-700 transition-all font-bold ${m?"opacity-70 cursor-not-allowed":"hover:-translate-y-0.5"}`,children:[(0,r.jsx)(i.Save,{className:"w-5 h-5"}),m?"Procesando...":"Confirmar Transferencia"]}),(0,r.jsx)("button",{type:"button",onClick:()=>u.back(),className:"w-full px-6 py-3 text-gray-500 hover:text-gray-800 font-medium transition-colors text-center",children:"Cancelar Operación"})]})]})]})]})}e.s(["default",()=>u])}]);