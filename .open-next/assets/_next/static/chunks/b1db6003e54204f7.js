(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15788,e=>{"use strict";let t=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>t],15788)},18566,(e,t,s)=>{t.exports=e.r(76562)},75254,e=>{"use strict";var t=e.i(71645);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:n,iconNode:d,...c},m)=>(0,t.createElement)("svg",{ref:m,...a,width:s,height:s,stroke:e,strokeWidth:i?24*Number(l)/Number(s):l,className:r("lucide",o),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(n)?n:[n]])),i=(e,a)=>{let i=(0,t.forwardRef)(({className:i,...o},n)=>(0,t.createElement)(l,{ref:n,iconNode:a,className:r(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...o}));return i.displayName=s(e),i};e.s(["default",()=>i],75254)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},36786,e=>{"use strict";var t=e.i(18050),s=e.i(71645),r=e.i(74080);function a({children:e,isOpen:a,onClose:l}){let[i,o]=(0,s.useState)(!1);return((0,s.useEffect)(()=>(o(!0),()=>o(!1)),[]),(0,s.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]),i&&a)?(0,r.createPortal)((0,t.jsx)("div",{className:"fixed inset-0 z-[99999] overflow-y-auto",role:"dialog","aria-modal":"true",children:(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-900/50 backdrop-blur-sm","aria-hidden":"true",onClick:l}),(0,t.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,t.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full relative z-[10000]",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 pt-4 pr-4 block",children:(0,t.jsxs)("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:l,children:[(0,t.jsx)("span",{className:"sr-only",children:"Cerrar"}),(0,t.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})}),e]})]})}),document.body):null}e.s(["default",()=>a])},88260,e=>{"use strict";var t=e.i(18050),s=e.i(71645),r=e.i(18566),a=e.i(57951),l=e.i(9165),i=e.i(83639),o=e.i(36786);function n(){let{user:e,loading:n,isAdmin:d}=(0,a.useAuth)(),c=(0,r.useRouter)(),[m,u]=(0,s.useState)([]),[x,p]=(0,s.useState)(!0),[h,g]=(0,s.useState)(""),[b,f]=(0,s.useState)(!1),[y,j]=(0,s.useState)(null),[w,v]=(0,s.useState)({nombre:"",porcentaje:"",codigo:""}),[N,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{n||d||c.push("/")},[n,d,c]);let C=(0,s.useCallback)(async()=>{try{p(!0);let e=(0,l.getApiClient)(),t=await e.getImpuestos();t.success&&t.data?u(t.data):g(t.error||"Error al cargar impuestos")}catch(e){g("Error de conexión al cargar impuestos")}finally{p(!1)}},[]);(0,s.useEffect)(()=>{d&&C()},[d,C]);let E=async e=>{e.preventDefault(),k(!0),g("");try{let e,t=(0,l.getApiClient)();if((e=y?await t.actualizarImpuesto(y,w):await t.crearImpuesto(w)).success)f(!1),C();else{let t="string"==typeof e.error?e.error:JSON.stringify(e.error);g(t||"Error al guardar")}}catch(e){g(e.message||"Error al guardar")}finally{k(!1)}},A=async e=>{if(window.confirm("¿Estás seguro de eliminar este impuesto?"))try{let t=(0,l.getApiClient)(),s=await t.eliminarImpuesto(e);s.success?C():alert(s.error||"Error al eliminar")}catch(e){alert("Error al eliminar")}};return n||x&&0===m.length?(0,t.jsx)(i.default,{children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):(0,t.jsxs)(i.default,{children:[(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Impuestos y Tarifas"}),(0,t.jsx)("button",{onClick:()=>{j(null),v({nombre:"",porcentaje:"",codigo:""}),f(!0),g("")},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"+ Nuevo Impuesto"})]}),h&&(0,t.jsx)("div",{className:"mb-4 bg-red-50 border-l-4 border-red-500 p-4 text-red-700",children:h}),(0,t.jsx)("div",{className:"bg-white shadow overflow-x-auto sm:rounded-lg",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Porcentaje"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Código SRI"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===m.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No hay impuestos registrados"})}):m.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.nombre}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.porcentaje,"%"]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.codigo}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,t.jsx)("button",{onClick:()=>{j(e.id),v({nombre:e.nombre,porcentaje:e.porcentaje,codigo:e.codigo}),f(!0),g("")},className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Editar"}),(0,t.jsx)("button",{onClick:()=>A(e.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},e.id))})]})})]}),(0,t.jsx)(o.default,{isOpen:b,onClose:()=>f(!1),children:(0,t.jsxs)("form",{onSubmit:E,children:[(0,t.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,t.jsx)("div",{className:"sm:flex sm:items-start",children:(0,t.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:y?"Editar Impuesto":"Nuevo Impuesto"}),(0,t.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,t.jsx)("input",{type:"text",required:!0,placeholder:"Ej: IVA 15%",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:w.nombre,onChange:e=>v({...w,nombre:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Porcentaje (%)"}),(0,t.jsx)("input",{type:"number",required:!0,step:"0.01",placeholder:"15.00",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:w.porcentaje,onChange:e=>v({...w,porcentaje:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Código SRI"}),(0,t.jsx)("input",{type:"text",required:!0,placeholder:"2",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:w.codigo,onChange:e=>v({...w,codigo:e.target.value})})]})]})]})]})})}),(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,t.jsx)("button",{type:"submit",disabled:N,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50",children:N?"Guardando...":"Guardar"}),(0,t.jsx)("button",{type:"button",onClick:()=>f(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})})]})}e.s(["default",()=>n])}]);