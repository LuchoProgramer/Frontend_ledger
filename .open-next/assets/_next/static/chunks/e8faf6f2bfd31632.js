(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15788,e=>{"use strict";let s=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>s],15788)},18566,(e,s,t)=>{s.exports=e.r(76562)},75254,e=>{"use strict";var s=e.i(71645);let t=e=>{let s=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase());return s.charAt(0).toUpperCase()+s.slice(1)},a=(...e)=>e.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:n="",children:d,iconNode:c,...o},m)=>(0,s.createElement)("svg",{ref:m,...r,width:t,height:t,stroke:e,strokeWidth:l?24*Number(i)/Number(t):i,className:a("lucide",n),...!d&&!(e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0})(o)&&{"aria-hidden":"true"},...o},[...c.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(d)?d:[d]])),l=(e,r)=>{let l=(0,s.forwardRef)(({className:l,...n},d)=>(0,s.createElement)(i,{ref:d,iconNode:r,className:a(`lucide-${t(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...n}));return l.displayName=t(e),l};e.s(["default",()=>l],75254)},7233,e=>{"use strict";let s=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},36786,e=>{"use strict";var s=e.i(18050),t=e.i(71645),a=e.i(74080);function r({children:e,isOpen:r,onClose:i}){let[l,n]=(0,t.useState)(!1);return((0,t.useEffect)(()=>(n(!0),()=>n(!1)),[]),(0,t.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),l&&r)?(0,a.createPortal)((0,s.jsx)("div",{className:"fixed inset-0 z-[99999] overflow-y-auto",role:"dialog","aria-modal":"true",children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-900/50 backdrop-blur-sm","aria-hidden":"true",onClick:i}),(0,s.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full relative z-[10000]",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 pt-4 pr-4 block",children:(0,s.jsxs)("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:i,children:[(0,s.jsx)("span",{className:"sr-only",children:"Cerrar"}),(0,s.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})}),e]})]})}),document.body):null}e.s(["default",()=>r])},25797,e=>{"use strict";var s=e.i(18050),t=e.i(71645),a=e.i(83639),r=e.i(9165),i=e.i(36786);function l(){let[e,l]=(0,t.useState)([]),[n,d]=(0,t.useState)([]),[c,o]=(0,t.useState)([]),[m,u]=(0,t.useState)(!0),[x,p]=(0,t.useState)(null),[h,g]=(0,t.useState)(!1),[f,b]=(0,t.useState)({username:"",email:"",password:"",first_name:"",last_name:"",is_active:!0,is_staff:!1,is_superuser:!1,grupos:[],sucursales:[]}),y=(0,r.getApiClient)();(0,t.useEffect)(()=>{j()},[]);let j=async()=>{try{u(!0);let[e,s,t]=await Promise.all([y.getUsuarios(),y.getGrupos(),y.getSucursalesList()]);l(e.results),d(s.grupos),o(t.results||t.data||[])}catch(e){console.error("Error fetching data:",e),alert("Error al cargar datos")}finally{u(!1)}},v=async e=>{e.preventDefault();try{if(x){let{password:e,...s}=f,t=e?f:s;await y.actualizarUsuario(x.id,t),alert("Usuario actualizado")}else await y.crearUsuario(f),alert("Usuario creado");g(!1),j()}catch(e){console.error(e),alert(e.message||"Error al guardar")}},N=e=>{e?(p(e),b({username:e.username,email:e.email,password:"",first_name:e.first_name,last_name:e.last_name,is_active:e.is_active,is_staff:e.is_staff,is_superuser:e.is_superuser,grupos:e.grupos.map(e=>e.id),sucursales:e.sucursales.map(e=>e.id)})):(p(null),b({username:"",email:"",password:"",first_name:"",last_name:"",is_active:!0,is_staff:!1,is_superuser:!1,grupos:[],sucursales:[]})),g(!0)},w=async e=>{if(confirm("¿Eliminar usuario?"))try{await y.eliminarUsuario(e),j()}catch(e){alert("Error al eliminar")}};return(0,s.jsx)(a.default,{children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestión de Usuarios"}),(0,s.jsx)("button",{onClick:()=>N(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Nuevo Usuario"})]}),m?(0,s.jsx)("div",{children:"Cargando..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"hidden md:block bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sucursales"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.username}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.first_name," ",e.last_name]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.grupos.map(e=>e.name).join(", ")}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.sucursales_count," asignadas"]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Activo":"Inactivo"}),e.is_staff&&(0,s.jsx)("span",{className:"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800",children:"Admin"})]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>N(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>w(e.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},e.id))})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4 md:hidden",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.username}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.email})]}),(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Activo":"Inactivo"})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Nombre:"})," ",e.first_name," ",e.last_name]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Roles:"})," ",e.grupos.map(e=>e.name).join(", ")]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Sucursales:"})," ",e.sucursales_count," asignadas"]}),e.is_staff&&(0,s.jsx)("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs font-semibold rounded bg-purple-100 text-purple-800",children:"Administrador del Sistema"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-2 border-t border-gray-100",children:[(0,s.jsx)("button",{onClick:()=>N(e),className:"px-3 py-1.5 bg-indigo-50 text-indigo-700 text-sm font-medium rounded hover:bg-indigo-100 transition-colors",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>w(e.id),className:"px-3 py-1.5 bg-red-50 text-red-700 text-sm font-medium rounded hover:bg-red-100 transition-colors",children:"Eliminar"})]})]},e.id))})]}),(0,s.jsxs)(i.default,{isOpen:h,onClose:()=>g(!1),children:[(0,s.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:x?"Editar Usuario":"Nuevo Usuario"})}),(0,s.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,s.jsx)("input",{type:"text",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:f.username,onChange:e=>b({...f,username:e.target.value}),disabled:!!x})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:f.email,onChange:e=>b({...f,email:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),(0,s.jsx)("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:f.first_name,onChange:e=>b({...f,first_name:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Apellido"}),(0,s.jsx)("input",{type:"text",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:f.last_name,onChange:e=>b({...f,last_name:e.target.value})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:x?"Contraseña (dejar en blanco para mantener)":"Contraseña"}),(0,s.jsx)("input",{type:"password",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",value:f.password,onChange:e=>b({...f,password:e.target.value}),required:!x})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles"}),(0,s.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto border p-2 rounded",children:n.map(e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:f.grupos.includes(e.id),onChange:()=>{var s;return s=e.id,void b(e=>{let t=e.grupos.includes(s);return{...e,grupos:t?e.grupos.filter(e=>e!==s):[...e.grupos,s]}})},className:"mr-2"}),(0,s.jsx)("span",{children:e.name})]},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sucursales Asignadas"}),(0,s.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto border p-2 rounded",children:c.map(e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:f.sucursales.includes(e.id),onChange:()=>{var s;return s=e.id,void b(e=>{let t=e.sucursales.includes(s);return{...e,sucursales:t?e.sucursales.filter(e=>e!==s):[...e.sucursales,s]}})},className:"mr-2"}),(0,s.jsx)("span",{children:e.nombre})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:f.is_active,onChange:e=>b({...f,is_active:e.target.checked}),className:"mr-2"}),(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Activo"})]}),(0,s.jsxs)("div",{className:"flex space-x-6",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:f.is_staff,onChange:e=>b({...f,is_staff:e.target.checked}),className:"mr-2"}),(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Es Administrador (Acceso al sistema)"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:f.is_superuser,onChange:e=>b({...f,is_superuser:e.target.checked}),className:"mr-2"}),(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Superusuario (Control total)"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,s.jsx)("button",{type:"button",onClick:()=>g(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancelar"}),(0,s.jsx)("button",{onClick:e=>v(e),type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm",children:"Guardar"})]})]})]})})}e.s(["default",()=>l])}]);