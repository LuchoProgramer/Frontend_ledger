(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15788,e=>{"use strict";let t=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>t],15788)},18566,(e,t,s)=>{t.exports=e.r(76562)},75254,e=>{"use strict";var t=e.i(71645);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:n,...o},x)=>(0,t.createElement)("svg",{ref:x,...a,width:s,height:s,stroke:e,strokeWidth:i?24*Number(l)/Number(s):l,className:r("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...n.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(c)?c:[c]])),i=(e,a)=>{let i=(0,t.forwardRef)(({className:i,...d},c)=>(0,t.createElement)(l,{ref:c,iconNode:a,className:r(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...d}));return i.displayName=s(e),i};e.s(["default",()=>i],75254)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},64659,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],64659)},63059,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],63059)},33913,e=>{"use strict";var t=e.i(18050),s=e.i(71645),r=e.i(83639),a=e.i(9165),l=e.i(73998),i=e.i(64659),d=e.i(63059),c=e.i(55436);function n(){let[e,n]=(0,s.useState)([]),[o,x]=(0,s.useState)(!1),[h,m]=(0,s.useState)(""),[g,p]=(0,s.useState)(""),[u,y]=(0,s.useState)(""),[b,j]=(0,s.useState)(1),[N,f]=(0,s.useState)(1),[w,v]=(0,s.useState)(new Set),k=(0,a.getApiClient)(),C=async()=>{x(!0);try{let e=await k.getAsientos({page:b,start_date:h,end_date:g,search:u});n(e.results||[]),e.count&&f(Math.ceil(e.count/20))}catch(e){console.error("Error loading asientos",e)}finally{x(!1)}};(0,s.useEffect)(()=>{let e=setTimeout(()=>{C()},500);return()=>clearTimeout(e)},[b,h,g,u]);let S=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(e));return(0,t.jsx)(r.default,{children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,t.jsx)(l.Book,{className:"w-8 h-8 text-indigo-600"}),"Libro Diario"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Registro cronológico de todas las transacciones contables"})]}),(0,t.jsx)("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm mb-6 border border-gray-100",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Desde"}),(0,t.jsx)("input",{type:"date",value:h,onChange:e=>{m(e.target.value),j(1)},className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hasta"}),(0,t.jsx)("input",{type:"date",value:g,onChange:e=>{p(e.target.value),j(1)},className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.Search,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Glosa, Referencia...",value:u,onChange:e=>{y(e.target.value),j(1)},className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"w-10 px-4 py-3"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Fecha / Asiento"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Glosa (Descripción)"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Referencia"}),(0,t.jsx)("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Total"}),(0,t.jsx)("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Estado"})]})}),(0,t.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[o&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"Cargando..."})}),!o&&0===e.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"p-8 text-center text-gray-500",children:"No hay asientos contables"})}),e.map(e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("tr",{className:`hover:bg-gray-50 transition-colors cursor-pointer ${w.has(e.id)?"bg-gray-50":""}`,onClick:()=>{var t;let s;return t=e.id,void((s=new Set(w)).has(t)?s.delete(t):s.add(t),v(s))},children:[(0,t.jsx)("td",{className:"px-4 py-4 text-gray-400",children:w.has(e.id)?(0,t.jsx)(i.ChevronDown,{className:"w-4 h-4"}):(0,t.jsx)(d.ChevronRight,{className:"w-4 h-4"})}),(0,t.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap",children:[(0,t.jsxs)("div",{className:"text-sm font-bold text-gray-900",children:["Asiento #",e.id]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.fecha).toLocaleDateString("es-EC")})]}),(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.glosa}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Origen: ",e.origen]})]}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.referencia}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-bold text-gray-900",children:S(e.detalles?.reduce((e,t)=>e+Number(t.debe),0)||0)}),(0,t.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-center",children:(0,t.jsx)("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${"VALIDADO"===e.estado?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.estado})})]},`header-${e.id}`),w.has(e.id)&&(0,t.jsx)("tr",{className:"bg-gray-50",children:(0,t.jsx)("td",{colSpan:6,className:"px-4 pb-4 pt-0",children:(0,t.jsx)("div",{className:"ml-10 bg-white border border-gray-200 rounded-lg overflow-hidden shadow-inner",children:(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-100 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600",children:"Cuenta"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600",children:"Descripción"}),(0,t.jsx)("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-600",children:"Debe"}),(0,t.jsx)("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-600",children:"Haber"})]})}),(0,t.jsxs)("tbody",{children:[e.detalles?.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b border-gray-100 last:border-0",children:[(0,t.jsxs)("td",{className:"px-4 py-2 font-mono text-gray-700",children:[e.cuenta_codigo," - ",e.cuenta_nombre]}),(0,t.jsx)("td",{className:"px-4 py-2 text-gray-600",children:e.descripcion}),(0,t.jsx)("td",{className:"px-4 py-2 text-right text-gray-800 font-medium",children:Number(e.debe)>0?S(e.debe):"-"}),(0,t.jsx)("td",{className:"px-4 py-2 text-right text-gray-800 font-medium",children:Number(e.haber)>0?S(e.haber):"-"})]},s)),(0,t.jsxs)("tr",{className:"bg-gray-50 font-bold",children:[(0,t.jsx)("td",{colSpan:2,className:"px-4 py-2 text-right",children:"Totales:"}),(0,t.jsx)("td",{className:"px-4 py-2 text-right text-indigo-700",children:S(e.total_debe||e.detalles?.reduce((e,t)=>e+Number(t.debe),0))}),(0,t.jsx)("td",{className:"px-4 py-2 text-right text-indigo-700",children:S(e.total_haber||e.detalles?.reduce((e,t)=>e+Number(t.haber),0))})]})]})]})})})},`detail-${e.id}`)]}))]})]})}),(0,t.jsxs)("div",{className:"flex justify-between items-center gap-4 mt-6",children:[(0,t.jsx)("button",{disabled:b<=1,onClick:()=>j(e=>e-1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"← Anterior"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:["Página ",b," de ",N]}),(0,t.jsx)("button",{disabled:b>=N,onClick:()=>j(e=>e+1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Siguiente →"})]})]})})}e.s(["default",()=>n])}]);